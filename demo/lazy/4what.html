<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<meta name="author" content="4what" />

<!--<script type="text/javascript" src="../../js/jquery/jquery-1.3.2.min.js"></script>-->

<!--<script type="text/javascript" src="../../js/util.js"></script>-->

<style type="text/css">
</style>

<!--
<script type="text/javascript">
$(function() {



});
</script>
-->
</head>

<body>

<div id="box">
	<input type="button" name="" value="btn" onclick='getVersion1();' />
</div>

<script type="text/javascript">
function dynamic(obj, src, callback) {
	callback = callback || new Function();

	if (obj) {
		callback();
		return;
	}

	window._scripts = window._scripts || {};

	window._scripts[src] = window._scripts[src] || {
		loaded: false,
		queue: []
	};

	if (window._scripts[src].loaded) {
		callback();
		return;
	}

	var queue = window._scripts[src].queue;

	if (queue.push(callback) === 1) {
		var
		head = document.getElementsByTagName("head")[0],
		script = document.createElement("script"),
		state;

		script.src = src;
		//script.type = "text/javascript";

		script.onload = // for Std
		script.onreadystatechange = // for IE
			function() {
				state = script.readyState;

				//alert(state)

				if (!state || /loaded|complete/.test(state)/* for IE */) {
					window._scripts[src].loaded = true;

					for (var i = 0, l = queue.length; i < l; i++) {
						queue[i]();
					}

					script.onload = script.onreadystatechange = null; // for IE

					//head.removeChild(script);

					script = undefined;
				}
			};

		head.appendChild(script);
	}
}

dynamic(window.$, "http://4what.github.io/cn/js/jquery/jquery-1.8.3.min.js", function() {
	alert("cb1");
});

dynamic(window.$, "http://4what.github.io/cn/js/jquery/jquery-1.8.3.min.js", function() {
	alert("cb2");
});

dynamic(false, "http://www.jsoops.com/demo/queue/js/queue.min.js", function() {
	alert("cb3");
});

function getVersion1() {
	dynamic(false, "http://4what.github.io/cn/js/jquery/jquery-1.8.3.min.js", function() {
		alert(0);
	});
}
</script>

</body>
</html>
