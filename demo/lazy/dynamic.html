<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<meta name="author" content="4what" />

<!-- <script type="text/javascript" src="http://www.jsoops.com/assets/themes/christen/js/jquery-1.9.1.min.js"></script> -->

<!--<script type="text/javascript" src="../../js/util.js"></script>-->



<style type="text/css">
</style>

<!--
<script type="text/javascript">
$(function() {



});
</script>
-->
</head>

<body>

<div id="box">
	<input type="button" name="" value="Show jQuery Version" onclick='alert(jQuery.fn.jquery);' />
	<input type="button" name="" value="get Browser version dynamic" onclick='getVersion1();' />
	<input type="button" name="" value="get Browser version needJS" onclick='getVersion2();' />
</div>

<script type="text/javascript">
function dynamic(obj, src, callback) {
	callback = callback || new Function();

	if (obj) {
		callback();
		return;
	}

	var
	scripts = window._scripts || (window._scripts = {}),
	queue = scripts[src] || (scripts[src] = []);

	if (queue.push(callback) === 1) {
		var
		head = document.getElementsByTagName("head")[0],
		script = document.createElement("script"),
		state;

		script.src = src;
		//script.type = "text/javascript";

		script.onload = // for Std
		script.onreadystatechange = // for IE
			function() {
				state = script.readyState;

				if (!state || /loaded|complete/.test(state)/* for IE */) {
					for (var i = 0, l = queue.length; i < l; i++) {
						queue[i]();
					}

					script.onload = script.onreadystatechange = null; // for IE

					//head.removeChild(script);

					script = undefined;
				}
			};

		head.appendChild(script);
	}
}

// dynamic(window.$, "http://4what.github.io/cn/js/jquery/jquery-1.8.3.min.js", function() {
// 	alert("cb1");
// });

// dynamic(false, "http://www.jsoops.com/assets/themes/christen/js/jquery-1.8.3.min.js", function() {
// 	alert("cb1: " + $.browser.version);
// });



// dynamic(false, "http://www.jsoops.com/demo/queue/js/queue.min.js", function() {
// 	alert("cb3");
// });

function getVersion1() {
	alert(1);
	dynamic(false, "http://www.jsoops.com/assets/themes/christen/js/jquery-1.8.3.min.js", function() {
		alert(3);
		alert("version: " + $.browser.version);
	});
	alert(2);
}

function needJS(E,C,B){B=B||function(){};if(E)return B(false);var $=window.__needJS__||(window.__needJS__=[]),D=$[C]||($[C]={loaded:false,callbacks:[]});if(D.loaded)return B(false);var _=D.callbacks;if(_.push(B)==1){var A=document.createElement("script");A.onload=A.onreadystatechange=function(){var $=A.readyState;if($&&$!="loaded"&&$!="complete")return;D.loaded=true;for(var B=0;B<_.length;B++)_[B](true)};A.src=C;document.getElementsByTagName("head")[0].appendChild(A)}}

function getVersion2() {
	alert(1);
	needJS(false, "http://www.jsoops.com/assets/themes/christen/js/jquery-1.7.2.min.js", function() {
		alert(3);
		alert("version: " + $.browser.version);
	});
	alert(2);
}

</script>



</body>
</html>
